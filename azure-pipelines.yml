# Docker image
# Build a Docker image to deploy, run, or push to a container registry.
# Add steps that use Docker Compose, tag images, push to a registry, run an image, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/docker

trigger:
- master

pool:
  vmImage: 'Ubuntu-16.04'

variables:
  imageName: 'your-container-image-name:$(build.buildId)'

steps:
- script: curl -O https://bootstrap.pypa.io/get-pip.py && python3 get-pip.py && sudo pip install awscli â€” upgrade
  displayName: 'Install AWS CLI Installation'

- script: docker-compose build
  displayName: 'docker build'

- script: docker login -u srinub66 -p "Srinu_66" && docker tag s_mymvcweb:latest srinub66/mymvcweb:latest && docker push srinub66/mymvcweb:latest
  displayName: 'docker push'